g_Chapter = "HARD RAIN - SUGAR MILL";

devchap( "ALL MODES" );

PrecacheModel( "models/props_mill/PipeSet08d_512_001a.mdl" );

function DoRoundFixes()
{
	make_clip(	"_commonhop_roadclosed",	"Survivors",	1,	"-132 -132 -21",	"132 132 2222",		"3231 -3009 257" );
	make_clip(	"_vent_roofa","Survivors",	1,	"-118 -4 -84",		"118 4 0",		"3699 -3727 476" );
	make_clip(	"_vent_roofb","Survivors",	1,	"-14 -216 -270",	"14 216 2000",		"3127 -3635 502" );
	make_clip(	"_permstuck_silos",		"Everyone",	1,	"-156 -256 -340",	"0 128 0",		"2696 -6088 435" );
	make_clip(	"_canefield_coneroof",	"Survivors",	1,	"-220 -755 -380",	"320 707 1938",		"72 -11887 573" );
	make_clip(	"_canefield_conewoof",	"Survivors",	1,	"1 -943 0",		"302 773 2192",		"-45 -10241 319" );
	make_clip(	"_commonhop_dualstacks",	"Survivors",	1,	"-340 -642 -266",	"5 450 2100",		"264 -4866 498" );
	make_clip(	"_permstuck_longfencea",	"Survivors",	1,	"-4 -130 -294",		"4 130 294",		"3996 -4978 506",	"0 36 0" );
	make_clip(	"_permstuck_longfenceb",	"Survivors",	1,	"-4 -130 -294",		"4 130 294",		"4072 -5214 506" );
	make_clip(	"_permstuck_longfencec",	"Survivors",	1,	"-4 -130 -294",		"4 130 294",		"4042 -5462 506",	"0 -14 0" );
	make_clip(	"_permstuck_longfenced",	"Survivors",	1,	"-4 -130 -294",		"4 130 294",		"4010 -5718 506" );
	make_clip(	"_permstuck_longfencee",	"Survivors",	1,	"-4 -130 -294",		"4 130 294",		"4010 -5978 506" );
	make_clip(	"_permstuck_longfencef",	"Survivors",	1,	"-4 -130 -294",		"4 130 294",		"3962 -6216 506",	"0 -22 0" );
	make_clip(	"_permstuck_quadtank",		"Everyone",	1,	"-290 -32 -200",	"134 32 0",		"1638 -5280 292" );
	make_clip(	"_shortcut_elevator_m2only",	"Survivors",	1,	"-64 -4 0",		"64 4 777",		"-1477 -9605 114" );
	make_clip(	"_commonhop_ducatelroof",	"Survivors",	1,	"-256 -164 0",		"256 164 4",		"3808 -3324 407" );
	make_clip( "_nav_cornerledge", "Survivors", 1, "-5 -67 0", "5 69 172", "-357 -8509 624" );
	make_clip( "_permstuck_cornerbush", "Everyone", 1, "-19 -49 0", "99 18 78", "3117 -1842 110" );
	make_clip( "_cliprework_clipextenda", "Survivors", 1, "-730 -264 0", "678 312 1792", "1306 -6648 735" );
	make_clip( "_cliprework_clipextendb", "Survivors", 1, "-1200 -976 0", "351 80 1280", "-703 -8512 1232" );
	make_clip( "_cliprework_millsilos", "Survivors", 1, "-938 -516 -100", "1128 506 1593", "2782 -4349 937" );
	make_clip( "_cliprework_millwheel", "Survivors", 1, "-865 -510 -62", "803 518 1852", "1761 -5826 660" );
	make_clip( "_cliprework_plywoodlip", "Survivors", 1, "-193 -5 0", "186 5 173", "-1743 -9483 624" );
	make_clip( "_cliprework_gasstation", "Survivors", 1, "-317 -328 0", "323 312 2082", "-899 -13512 432" );
	make_clip( "_nav_silo_witch1", "Survivors", 1, "-7 -7 0", "9 8 150", "2793 -5911 284" );
	make_clip( "_nav_silo_witch2", "Survivors", 1, "-7 -7 0", "5 7 150", "2695 -5854 284" );
	make_clip( "_nav_silo_witch3", "Survivors", 1, "-7 -7 0", "9 8 150", "2596 -5911 284" );
	make_clip( "_nav_silo_witch4", "Survivors", 1, "-7 -7 0", "9 8 150", "2596 -5513 284" );
	make_clip( "_nav_silo_witch5", "Survivors", 1, "-7 -7 0", "5 7 150", "2698 -5570 284" );
	make_clip( "_nav_silo_witch6", "Survivors", 1, "-7 -7 0", "9 8 150", "2796 -5513 284" );
	make_clip( "_nav_rubblewalla", "Survivors", 1, "-6 0 -13", "6 96 114", "-1152 -8556 712" );
	make_clip( "_nav_rubblewallb", "Survivors", 1, "-6 0 -13", "6 96 114", "-1152 -9457 712" );
	make_clip( "_cliprework_thimbleroof", "Survivors", 1, "0 -480 0", "401 464 2242", "288 -7936 281" );
	make_clip( "_clipextend_thimblestack", "Survivors", 1, "-67 -52 0", "63 70 2084", "394 -7429 440" );
	make_clip( "_clipextend_generator", "Survivors", 1, "-24 -35 0", "26 31 1821", "-769 -7654 687" );
	make_clip( "_clipextend_treecluster", "Survivors", 1, "-43 -42 0", "31 40 1960", "114 -6111 576" );
	make_clip( "_rubble_smoother1", "Everyone", 1, "-1 -93 0", "1 106 4", "2239 -5093 121", "0 -15 0" );
	make_clip( "_rubble_smoother2", "Everyone", 1, "-66 -6 0", "58 0 6", "2176 -4926 98", "0 -15 0" );
	make_clip( "_rubble_smoother3", "Everyone", 1, "-58 -90 0", "61 45 13", "2055 -4931 97", "0 21 0" );
	make_clip( "_rubble_smoother4", "Everyone", 1, "-138 -26 0", "79 16 11", "1966 -5174 99", "0 15 30" );
	make_clip( "_commentary_spool", "Survivors", 1, "0 0 -1151", "62 62 1151", "502 -6628 1376" );
	make_clip( "_commentary_elevatorpipe", "Survivors", 1, "0 0 0", "50 50 500", "-1535 -9144.59 614.604" );

	con_comment( "KILL:\tInsta-kill triggers to prevent elevator skip deleted on inner-button press." );

	make_trighurt( "_instakill_elevatora", "Survivor", "-196 -691 0", "1460 61 8", "-1204 -9549 394" );
	make_trighurt( "_instakill_elevatorb", "Survivor", "-372 -691 0", "644 -65 8", "-2044 -9549 394" );
	EntFire( "button_inelevator", "AddOutput", "OnPressed " + g_UpdateName + "_instakill_elevator*:Kill::0:-1" );

	// All-mode QoL clip for a Valve ladder and move it 2 units so players don't get caught on critpath anymore.

	make_clip( "_ladderqol_millladder", "Everyone", 1, "-48 -1 0", "90 0 128", "1392 -5564 228" );
	patch_ladder( "1454 -5565.5 292.25", "0 2 0" );

	if ( g_BaseMode != "coop" && g_BaseMode != "realism" )
	{
		make_clip( "_commentary_upperfactory_a", "Survivors", 1, "-117 -97 -192", "117 97 1976", "2349 -5535 552" );
		make_clip( "_commentary_upperfactory_b", "Survivors", 1, "-8 -12 -192", "8 12 1976", "2223 -5512 552" );
		make_clip( "_commentary_upperfactory_c", "Survivors", 1, "-41 -55 -192", "41 55 1976", "2272 -5386 552" );
		make_clip( "_commentary_upperfactory_d", "Survivors", 1, "-576 -33 -192", "576 33 1976", "1656 -5364 552" );
		make_clip( "_commentary_upperfactory_e", "Survivors", 1, "-32 -428 -192", "32 428 1976", "1927 -5824 552" );
		make_clip( "_commentary_upperfactory_f", "Survivors", 1, "-616 -38 -192", "616 38 1976", "1696 -6290 552" );
		make_clip( "_commentary_upperfactory_g", "Survivors", 1, "-254 -118 -192", "254 118 1976", "1537 -6134 552" );
		make_clip( "_commentary_upperfactory_h", "Survivors", 1, "-193 -85 -192", "193 85 1976", "1536 -5480 552" );
		make_clip( "_commentary_upperfactory_i", "Survivors", 1, "-48 -100 -192", "48 100 1976", "1354 -5728 552" );
		make_clip( "_commentary_upperfactory_j", "Survivors", 1, "-32 -428 -192", "32 428 1976", "1112 -5824 552" );
		make_clip( "_commentary_upperfactory_k", "Survivors", 1, "-336 -90 -192", "336 90 1976", "745 -5421 552" );
		make_clip( "_commentary_upperfactory_l", "Survivors", 1, "-33 -61 -192", "33 61 1976", "727 -5572 552" );
		make_clip( "_commentary_upperfactory_m", "Survivors", 1, "-116 -144 -192", "116 144 1976", "2108 -5728 552" );
		make_clip( "_commentary_upperfactory_n", "Survivors", 1, "-38 -57 -192", "38 57 1976", "2263 -5694 552" );
		make_clip( "_commentary_upperfactory_o", "Survivors", 1, "-255 -10 -192", "255 10 1976", "514 -5322 552" );
		make_clip( "_commentary_upperfactory_p", "Survivors", 1, "-10 -388 -192", "10 388 1976", "249 -5700 552" );
	}
	if ( g_BaseMode == "versus" )
	{
		devchap( "BASE VERSUS" );

		// FIXES

		make_clip( "_truck_fence1", "Survivors", 1, "-3 -128 -1546", "3 128 1546", "4292 -2990 1641.5" );
		make_clip( "_truck_fence2", "Survivors", 1, "-92 -3 -1546", "92 3 1546", "4388 -2865 1642" );
		make_clip( "_commentary_factoryhopup_a", "Survivors", 1, "-70 -11 -8", "38 11 28", "1214 -4856 168" );
		make_clip( "_commentary_factoryhopup_b", "Survivors", 1, "-48 -11 -8", "8 11 88", "1136 -4856 108" );
	}
	if ( g_BaseMode == "survival" )
	{
		devchap( "BASE SURVIVAL" );

		// FIXES

		make_clip( "_survival_construct", "Survivors", 1, "-438 -137 -272", "350 7 172", "-702 -8439 624" );
		make_clip( "_survival_extendpipe", "Survivors", 1, "-77 -203 -260", "67 302 2032", "-703 -8229 511" );
		make_clip( "_nav_semitrailer", "Survivors", 1, "-274 -63 0", "263 53 2262", "70 -8187 261" );
		make_clip( "_nav_jumptotree", "Survivors", 1, "-78 -66 0", "128 46 2202", "-1250 -7925 331" );
	}

	if ( HasPlayerControlledZombies() )
	{
		make_brush( "_losfix_gas_truck",	"-1 -75 -12",	"1 75 12",	"-572 -13262.9 133" );
		make_brush( "_losfix_gen",		"-1 -20 -8",	"1 20 8",	"-1390 -13156 125" );
		make_brush( "_losfix_trailer1",		"-1 -81 -20",	"1 80 15",	"1219 -4171 120" );
		make_brush( "_losfix_trailer2",		"-72 -1 -20",	"72 1 18",	"1149 -4253 116" );
		make_brush( "_losfix_trailer3",		"-72 -1 -20",	"72 1 20",	"1074 -4342 116" );
		make_brush( "_losfix_truck",		"-1 -70 -12",	"1 70 12",	"4106 -2935 115" );
		make_clip( "_ladder_parkourouthouse_clip", "SI Players", 1, "-31 -28 0", "29 29 10", "1017 -4471 200", "0 15 0" );
		make_ladder( "_ladder_ducatelelecbox_cloned_ducateldumpsters", "-1586.2 -13843.5 218.25", "11911 -15404 0", "0 -90 0", "-1 0 0" );
		make_ladder( "_ladder_ducatelroofl_cloned_brokenlocker", "2756 -3833.5 392.25", "-5049 -16350 0", "0 90 0", "-1 0 0" );
		make_ladder( "_ladder_ducatelroofr_cloned_brokenlocker", "2756 -3833.5 392.25", "-5049 -16384 0", "0 90 0", "-1 0 0" );
		make_ladder( "_ladder_grindergirder_cloned_bricksemitrailer", "4319.5 -3675.85 264.25", "-1856 -1939 -23" );
		make_ladder( "_ladder_jaggedchainlinkback1_cloned_stacksfenceback", "258 -4883.67 156.145", "4269 -10900 -19", "0 180 0", "0 0 1" );
		make_ladder( "_ladder_jaggedchainlinkback2_cloned_stacksfenceback", "258 -4883.67 156.145", "4269 -10550 -19", "0 180 0", "0 0 1" );
		make_ladder( "_ladder_jaggedchainlinkfront_cloned_stacksfenceback", "258 -4883.67 156.145", "3750 -1083 -19" );
		make_ladder( "_ladder_parkourouthouse_cloned_rubbleshortpipe", "1988.06 -4910.53 164.268", "-2152 -260 -33", "0 14.76 0", "0.26 -0.97 0" );
		make_ladder( "_ladder_parkoursiloleft_cloned_stacksfencebackr", "258 -4883.67 156.145", "-650.26 362.19 193.85", "0 22.5 0", "-0.92 -0.38 0" );
		make_ladder( "_ladder_parkoursiloright_cloned_stacksfenceback", "258 -4883.67 156.145", "-640.26 338.19 193.85", "0 22.5 0", "-0.92 -0.38 0" );
		make_ladder( "_ladder_pipeyardsemi_cloned_millgrinder", "2001.5 -5712 273.75", "9997 -1842 -98", "0 -90 0" "0 -1 0" );
		make_ladder( "_ladder_saferoofpipe_cloned_bricksemitrailer", "4319.5 -3675.85 264.25", "7776 -5566 -8", "0 180 0", "-1 0 0" );
		make_ladder( "_ladder_siloplatform_cloned_grinderwheel", "1080.5 -6085.5 237.133", "1839 -12326.5 -2", "0 180 0", "1 0 0" );
		make_ladder( "_ladder_silosemirearleft_cloned_millgrinder", "2001.5 -5712 273.75", "-3687 -11733 -75", "0 127.5 0" "-0.6 0.79 0" );
		make_ladder( "_ladder_silosemirearright_cloned_millgrinder", "2001.5 -5712 273.75", "-3990 -11905 -75", "0 127.5 0" "-0.6 0.79 0" );
		make_ladder( "_ladder_stacksfencefront_cloned_stacksfenceback", "258 -4883.67 156.145", "524 -9863 0", "0 180 0" "0 0 1" );
		make_ladder( "_ladder_talleventpillar1_cloned_talleventpipe", "-1497 -9117.13 400.25", "-10269 -7652 0", "0 90 0" "0 1 0" );
		make_ladder( "_ladder_talleventpillar2_cloned_talleventpipe", "-1497 -9117.13 400.25", "7965 -10268 0", "0 -90 0" "0 -1 0" );
		make_ladder( "_ladder_tallspoolsroofleft_cloned_bigwindowspipe", "2369.33 -4846.5 302.25", "-1722 -2626 -76" );
		make_ladder( "_ladder_tallspoolsroofright_cloned_bigwindowspipe", "2369.33 -4846.5 302.25", "3017 -13262 -71", "0 -180  0", "0 -1 0" );
		make_ladder( "_ladder_tallvinereturn_cloned_brokenlocker", "2756 -3833.5 392.25", "3907 -9165 19", "0 -180 0", "0 -1 0" );
		make_ladder( "_ladder_tankescape_cloned_bricksemitrailer", "4319.5 -3675.85 264.25", "-3231 -9632 -64", "0 90 0", "0 1 0" );
		make_ladder( "_ladder_tankreturn_cloned_bricksemitrailer", "4319.5 -3675.85 264.25", "4730 -9078 -23", "0 -180 0", "-1 0 0" );
		make_ladder( "_ladder_thimblesemi_cloned_millgrinder", "2001.5 -5712 273.75", "5981 -6400 -98", "0 -91.48 0" "0 -1 0" );
		make_ladder( "_ladder_truckfencereturn_cloned_stacksfenceback", "258 -4883.67 156.145", "4551 -7959 1", "0 180 0" "1 0 0" );
		make_prop( "dynamic", "_ladder_saferoofpipe_pipe", "models/props_mill/PipeSet08d_512_001a.mdl", "3466 -1891 158", "90 90 0", "shadow_no" );
		patch_ladder( "1143.5 -5515.5 226", "0 5 0" );
	}
}